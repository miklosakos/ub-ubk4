#!/bin/sh -eux

# vulkan-overlay-layer: https://github.com/KhronosGroup/glslang
# kodi: https://bugs.launchpad.net/ubuntu/+source/mesa/+bug/1836979/comments/9
# kodi: https://github.com/uhulinux/ub-ubk4/issues/3#issuecomment-759607534
ub_compile \
    -Dplatforms=x11,wayland \
    -Ddri3=true \
    -Dgallium-extra-hud=true \
    -Dgallium-vdpau=true \
    -Dgallium-xvmc=true \
    -Dgallium-va=true \
    -Dgallium-xa=true \
    -Dgallium-nine=true \
    -Dgallium-opencl=icd \
	-Dgallium-omx=bellagio \
    -Dvulkan-drivers=amd,intel \
    -Dvulkan-overlay-layer=true \
    -Dvulkan-device-select-layer=true \
    -Dgles1=false \
    -Dgles2=true \
	-Dgbm=true \
	-Dglx=dri \
    -Degl=true \
	-Dglvnd=true \
	-Dllvm=true \
	-Dlibunwind=true \
	-Dlmsensors=true \
    -Dswr-arches=avx,avx2 \
	-Dtools=all \
    -Db_ndebug=true \
    -Db_lto=true
