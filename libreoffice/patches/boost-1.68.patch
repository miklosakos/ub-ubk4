From 3ef3569c4ae1c5319aff0664d52cbd8a8d42c909 Mon Sep 17 00:00:00 2001
From: rezso <rezso@rezso.net>
Date: Tue, 4 Sep 2018 01:18:10 +0200
Subject: tdf#119344 fix libcmis build with boost 1.68

Change-Id: I80d6ea8ecd001dc02b941c1eb8974c9244316045
Reviewed-on: https://gerrit.libreoffice.org/59958
Tested-by: Jenkins
Reviewed-by: Michael Stahl <Michael.Stahl@cib.de>
---
 external/libcmis/UnpackedTarball_libcmis.mk |  1 +
 external/libcmis/boost-1.68.patch.0         | 15 +++++++++++++++
 2 files changed, 16 insertions(+)
 create mode 100644 external/libcmis/boost-1.68.patch.0

diff --git a/external/libcmis/UnpackedTarball_libcmis.mk b/external/libcmis/UnpackedTarball_libcmis.mk
index 8ce0b03..0ec8f51 100644
--- a/external/libcmis/UnpackedTarball_libcmis.mk
+++ b/external/libcmis/UnpackedTarball_libcmis.mk
@@ -21,6 +21,7 @@ $(eval $(call gb_UnpackedTarball_add_patches,libcmis, \
 						external/libcmis/libcmis-sharepoint-repository-root.patch \
 						external/libcmis/libcmis-fix-error-handling.patch \
 						external/libcmis/c++17.patch.0 \
+						external/libcmis/boost-1.68.patch.0 \
 ))
 
 ifeq ($(OS),WNT)
diff --git a/external/libcmis/boost-1.68.patch.0 b/external/libcmis/boost-1.68.patch.0
new file mode 100644
index 0000000..2d86a4d
--- /dev/null
+++ b/external/libcmis/boost-1.68.patch.0
@@ -0,0 +1,15 @@
+--- src/libcmis/xml-utils.cxx.orig	2016-03-01 16:14:26 UTC
++++ src/libcmis/xml-utils.cxx
+@@ -31,7 +31,12 @@
+ #include <sstream>
+ #include <stdlib.h>
+ 
++#include <boost/version.hpp>
++#if (BOOST_VERSION >= 106800)
++#include <boost/uuid/detail/sha1.hpp>
++#else
+ #include <boost/uuid/sha1.hpp>
++#endif
+ #include <curl/curl.h>
+ 
+ #include "xml-utils.hxx"
-- 
cgit v1.1
